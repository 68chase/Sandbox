mixin scripteditor_head
	block

mixin scripteditor_body

		#ScriptEditor.verticalLayout.minimized(ng-controller='ScriptEditorController', style='z-index:99')

			#scripteditortitle.ui-dialog-titlebar.ui-widget-header.ui-corner-all.ui-helper-clearfix(style = 'padding:3px 4px 3px 4px;font:1.5em sans-serif;font-weight: bold;')
				.headericon.script
				span#scripteditortitletext.ui-dialog-title ScriptEditor 
					| {{fields.selectedNode ? '- '+(fields.selectedNode.properties.DisplayName || fields.selectedNode.id) : ''}}
				#maximizescripteditor.icon.glyphicon.glyphicon-chevron-up(ng-hide='maximized', ng-click='maximize()')
				#unmaximizescripteditor.icon.glyphicon.glyphicon-resize-small(ng-show='maximized', ng-click='unmaximize()')
				#hidescripteditor.icon.glyphicon.glyphicon-chevron-down(ng-click='hide()')

			#ScriptEditorTabs.verticalLayout
				.tabs-nav
					label(ng-class='{"selected": guiState.openTab === "methods"}')
						input(type='radio', name='openTab', ng-model='guiState.openTab', value='methods')
						| Methods
					label(ng-class='{"selected": guiState.openTab === "events"}')
						input(type='radio', name='openTab', ng-model='guiState.openTab', value='events')
						| Events
					label(ng-class='{"selected": guiState.openTab === "properties"}')
						input(type='radio', name='openTab', ng-model='guiState.openTab', value='properties')
						| Properties
					label(ng-class='{"selected": guiState.openTab === "options"}')
						input(type='radio', name='openTab', ng-model='guiState.openTab', value='options')
						| Options

				.tabs-panel.horizontalLayout(ng-show='guiState.openTab !== "options"')
					.list
						label.listitem(ng-repeat='item in currentList | filter: (guiState.showHiddenProperties ? {} : {name:"!__"})'
							ng-class='{"selected": currentList.selected===item.name, "dirty": dirty[item.id]}')
							input(type='radio', name='selectedField', ng-model='currentList.selected', ng-value='item.name')
							| {{item.name}}

						label.listitem.suggestion(ng-repeat='item in currentSuggestions', ng-hide='hasField(item.name, currentList)'
							ng-class='{"selected": currentList.selected===item.name, "dirty": dirty[item.id]}'
							title='Create the "{{item.name}}" {{guiState.openTab.slice(0,-1)}}')
							input(type='radio', name='selectedField', ng-model='currentList.selected', ng-value='item.name')
							| {{item.name}}
							
					.textinner.verticalLayout
						ace-code-editor.content(disabled='fields.selectedNode.id==="index-vwf" || !guiState.openTab || !currentList.selected'
							ng-class='{"dirty": dirty[selectedField.id]}')
						.buttonPanel.horizontalLayout
							input#save(type='button', value='Save {{getSingular(guiState.openTab)}}'
								ng-disabled='!dirty[selectedField.id]', ng-click='save()')
							input#discard(type='button', value='Discard Changes'
								ng-disabled='!dirty[selectedField.id]', ng-click='discard()')
							.spacer
							input#call(type='button', value='Call {{getSingular(guiState.openTab)}}'
								ng-hide='guiState.openTab === "properties"', ng-click='call()')
							input#delete(type='button', value='Delete {{getSingular(guiState.openTab)}}'
								ng-hide='guiState.openTab === "properties"', ng-click='delete()')
							input#new(type='button', ng-click='new()', value='New {{getSingular(guiState.openTab)}}')
							input#checkSyntax(type='button', ng-click='checkSyntax(true)', value='Check Code')
					

				#options.tabs-panel.horizontalLayout(ng-show='guiState.openTab === "options"')
					label.toggleButton(ng-class='{"checked": guiState.inheritPrototype}')
						input(type="checkbox", ng-model='guiState.inheritPrototype')
						| Show Inherited Properties
					label.toggleButton(ng-class='{"checked": guiState.showHiddenProperties}')
						input(type="checkbox", ng-model='guiState.showHiddenProperties')
						| Show Hidden Properties

