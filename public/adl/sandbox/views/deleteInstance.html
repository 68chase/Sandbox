<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<link rel="stylesheet" href="css/colorpicker.css" type="text/css" />
    <link rel="stylesheet" media="screen" type="text/css" href="css/layout.css" />
    <title>Virtual World Framework</title>
	<script type="text/javascript" src="jquery-1.7.1.js"></script>
    <script type="text/javascript" src="jquery-ui-1.8.16.custom.js"></script>
	<style>
	.coldstate
	{
	
		cursor: pointer;
		background: #f6f8f9; /* Old browsers */
		background: -moz-linear-gradient(top,  #f6f8f9 0%, #e5ebee 50%, #d7dee3 56%, #f5f7f9 100%); /* FF3.6+ */
		background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f6f8f9), color-stop(50%,#e5ebee), color-stop(56%,#d7dee3), color-stop(100%,#f5f7f9)); /* Chrome,Safari4+ */
		background: -webkit-linear-gradient(top,  #f6f8f9 0%,#e5ebee 50%,#d7dee3 56%,#f5f7f9 100%); /* Chrome10+,Safari5.1+ */
		background: -o-linear-gradient(top,  #f6f8f9 0%,#e5ebee 50%,#d7dee3 56%,#f5f7f9 100%); /* Opera 11.10+ */
		background: -ms-linear-gradient(top,  #f6f8f9 0%,#e5ebee 50%,#d7dee3 56%,#f5f7f9 100%); /* IE10+ */
		background: linear-gradient(to bottom,  #f6f8f9 0%,#e5ebee 50%,#d7dee3 56%,#f5f7f9 100%); /* W3C */
		filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f6f8f9', endColorstr='#f5f7f9',GradientType=0 ); /* IE6-9 */

		border-radius: 10px;
		margin: 10px;
		padding: 10px;
		text-align: center;
		font-size: 1.8em;
		box-shadow: 5px 5px 10px;
		width: 200px;
		height: 200px;
		display: inline-block;
		vertical-align: middle;
		color: #52697E;
		overflow: hidden;
		text-decoration: none;
	}
	.hotstate
	{

		cursor: pointer;
		background: rgb(184,225,252); /* Old browsers */
		background: -moz-linear-gradient(top,  rgba(184,225,252,1) 0%, rgba(144,191,240,1) 47%, rgba(107,168,229,1) 53%, rgba(191,215,255,1) 100%); /* FF3.6+ */
		background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(184,225,252,1)), color-stop(47%,rgba(144,191,240,1)), color-stop(53%,rgba(107,168,229,1)), color-stop(100%,rgba(191,215,255,1))); /* Chrome,Safari4+ */
		background: -webkit-linear-gradient(top,  rgba(184,225,252,1) 0%,rgba(144,191,240,1) 47%,rgba(107,168,229,1) 53%,rgba(191,215,255,1) 100%); /* Chrome10+,Safari5.1+ */
		background: -o-linear-gradient(top,  rgba(184,225,252,1) 0%,rgba(144,191,240,1) 47%,rgba(107,168,229,1) 53%,rgba(191,215,255,1) 100%); /* Opera 11.10+ */
		background: -ms-linear-gradient(top,  rgba(184,225,252,1) 0%,rgba(144,191,240,1) 47%,rgba(107,168,229,1) 53%,rgba(191,215,255,1) 100%); /* IE10+ */
		background: linear-gradient(to bottom,  rgba(184,225,252,1) 0%,rgba(144,191,240,1) 47%,rgba(107,168,229,1) 53%,rgba(191,215,255,1) 100%); /* W3C */
		filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#b8e1fc', endColorstr='#bfd7ff',GradientType=0 ); /* IE6-9 */
		color: #52697E;
		border-radius: 10px;
		margin: 10px;
		padding: 10px;
		text-align: center;
		font-size: 1.8em;
		box-shadow: 5px 5px 10px;
		width: 200px;
		height: 200px;
		display: inline-block;
		vertical-align: middle;
		text-decoration: none;
		overflow: hidden;
	}
	.title
	{
		margin-top: 1em;
		text-decoration: underline;
	}
	.description
	{
		font-size: .7em;
		margin-top: 1em;
	}
	.owner
	{
		font-size: .5em;
		color: gray;
		margin-top: 1em;
	}
	.objects
	{
		font-size: .5em;
		color: gray;
		margin-top: .2em;
	}
	.lastModified
	{
		font-size: .5em;
		color: gray;
		margin-top: .2em;
	}
	.stateid
	{
		font-size: .5em;
		color: lightgray;
		margin-top: .2em;
	}
	.button
	{

		cursor: pointer;
		background: rgb(226,226,226); /* Old browsers */
background: -moz-linear-gradient(top,  rgba(226,226,226,1) 0%, rgba(219,219,219,1) 50%, rgba(209,209,209,1) 51%, rgba(254,254,254,1) 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(226,226,226,1)), color-stop(50%,rgba(219,219,219,1)), color-stop(51%,rgba(209,209,209,1)), color-stop(100%,rgba(254,254,254,1))); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  rgba(226,226,226,1) 0%,rgba(219,219,219,1) 50%,rgba(209,209,209,1) 51%,rgba(254,254,254,1) 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  rgba(226,226,226,1) 0%,rgba(219,219,219,1) 50%,rgba(209,209,209,1) 51%,rgba(254,254,254,1) 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  rgba(226,226,226,1) 0%,rgba(219,219,219,1) 50%,rgba(209,209,209,1) 51%,rgba(254,254,254,1) 100%); /* IE10+ */
background: linear-gradient(to bottom,  rgba(226,226,226,1) 0%,rgba(219,219,219,1) 50%,rgba(209,209,209,1) 51%,rgba(254,254,254,1) 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#e2e2e2', endColorstr='#fefefe',GradientType=0 ); /* IE6-9 */

		border-radius: 10px;
		margin-top: 10px;
		padding: 10px;
		text-align: center;
		font-size: 1.8em;
		box-shadow: 5px 5px 5px;
		
		width: 25%;
	}
	.hotstate:hover
	{
		border: 1px solid lightblue;
		width: 198px;
		height: 198px;
		color: #52697E;
	}
	
	.coldstate:hover
	{
		border: 1px solid lightblue;
		width: 198px;
		height: 198px;
		color: #52697E;
	}
	.input
	{
		font-size: 1.6em;
		padding: 5px;
		border-radius: 10px;
		width: 65%;
		margin-top: 10px;
	}
	</style>

	<script type="text/javascript" src="vwf/view/editorview/sha256.js"></script>
    <script type="text/javascript">
	
		$(document).ready(function()
		{
			$.ajax('/vwfDataManager.svc/logindata',
				{
					cache:false,
					success:function(data,status,xhr)
					{
						var state = window.location.search.substr(window.location.search.indexOf('=')+1);
						var path = window.location.pathname.substr(0,window.location.pathname.lastIndexOf('/')+1);
						
						var sid = path+state+'/';
						$.ajax('/vwfDataManager.svc/statedata?SID=' + sid,
						{
							cache:false,
							success:function(data,status,xhr)
							{
								setup();
								var data = JSON.parse(xhr.responseText);
								$('#txtInstanceName').val(data.title);
								$('#txtInstanceDescription').val(data.description);
							},
							error:function(xhr,status,err)
							{
								$('#error').text("Error: " + xhr.responseText);
							}
						});
						
					},
					error:function(xhr,status,err)
					{
						redirect();
					}
				});
				
		});	
		function redirect()
		{
			window.location.pathname = '';
		}
		function setup()
		{
		
			$('#btnDelete').click(
			function(){
			
				
				var confirm = $('#confirm').val();
				if(confirm != 'Yes')
				{
					$('#error').text("Enter 'Yes' in the box above.");
					
				}
				
				var state = window.location.search.substr(window.location.search.indexOf('=')+1);
				var path = window.location.pathname.substr(0,window.location.pathname.lastIndexOf('/')+1);
				
				var sid = path+state+'/';
				
			
				
				
				jQuery.ajax(
				{
					type: 'DELETE',
					url: '/vwfDataManager.svc/state?SID='+sid,
					success:function(data,status,xhr)
					{
						redirect();
					},
					error:function(xhr,status,err)
					{
						$('#error').text("Error: " + xhr.responseText);
					},
					dataType: "text"
				});
				
				
				
			});
		
		};
		
	</script>
</head>
<body>

    <div class="wrapper">
		<h1> Virtual World Framework Delete World </h1>
		<div>Type yes in the box below then hit "Delete". </div>
		
		<div>
		 <input type='textarea' id='confirm' class='input' placeholder='Type "Yes"'/>
		 <div id = 'btnDelete' class='button'> Delete </div>
		 <div id = 'btnCancel' class='button'> Cancel </div>
		</div>
		<div id='error' style="margin-top: 20PX;font-size: 3EM;color: red;"/>
		
    </div>
</body>
</html>
